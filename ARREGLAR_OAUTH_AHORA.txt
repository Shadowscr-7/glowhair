╔══════════════════════════════════════════════════════════════════╗
║  🚨 ARREGLO RÁPIDO - OAuth Google No Funciona                   ║
╚══════════════════════════════════════════════════════════════════╝

EL PROBLEMA:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Tu Site URL en Supabase está configurada como:
❌ https://glowhair.vercel.app

Pero estás probando en:
✅ http://localhost:3000

Entonces cuando Google te redirige, te manda a una URL que no existe.


LA SOLUCIÓN (5 pasos):
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌─ PASO 1: Ve a Supabase Dashboard ─────────────────────────────┐
│                                                                 │
│  1. Abre: https://supabase.com/dashboard                      │
│  2. Selecciona tu proyecto                                     │
│  3. Ve a: Authentication → URL Configuration                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─ PASO 2: Cambiar Site URL ────────────────────────────────────┐
│                                                                 │
│  En "Site URL" cambia de:                                      │
│  ❌ https://glowhair.vercel.app                               │
│                                                                 │
│  A:                                                            │
│  ✅ http://localhost:3000                                     │
│                                                                 │
│  [SAVE] ← No olvides guardar                                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─ PASO 3: Agregar Redirect URLs ───────────────────────────────┐
│                                                                 │
│  En "Redirect URLs" agrega estas líneas (una por línea):      │
│                                                                 │
│  http://localhost:3000                                         │
│  http://localhost:3000/**                                      │
│  https://glowhair.vercel.app                                   │
│  https://glowhair.vercel.app/**                                │
│                                                                 │
│  [SAVE] ← Guarda los cambios                                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─ PASO 4: Verificar Google Cloud Console ──────────────────────┐
│                                                                 │
│  1. Ve a: https://console.cloud.google.com/                   │
│  2. APIs & Services → Credentials                              │
│  3. Edita tu OAuth 2.0 Client ID                              │
│  4. En "Authorized redirect URIs" verifica que tengas:        │
│                                                                 │
│     ✅ http://localhost:3000/api/auth/callback                │
│     ✅ https://mfcdxnfppgvyknbsdmzy.supabase.co/auth/v1/callback
│                                                                 │
│  5. [SAVE] ← Guarda                                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─ PASO 5: Reiniciar y Probar ──────────────────────────────────┐
│                                                                 │
│  En tu terminal:                                               │
│                                                                 │
│  1. Presiona Ctrl+C (detener servidor)                        │
│  2. npm run dev                                                │
│  3. Ve a: http://localhost:3000/login                         │
│  4. Haz clic en el botón de Google                            │
│                                                                 │
│  ¡Debería funcionar! 🎉                                        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘


URLS CORRECTAS PARA COPIAR/PEGAR:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Para Supabase Dashboard:
┌─────────────────────────────────────────────────────────────────┐
│ Site URL (desarrollo):                                          │
│ http://localhost:3000                                           │
│                                                                 │
│ Redirect URLs (todas):                                         │
│ http://localhost:3000                                           │
│ http://localhost:3000/**                                        │
│ https://glowhair.vercel.app                                     │
│ https://glowhair.vercel.app/**                                  │
└─────────────────────────────────────────────────────────────────┘

Para Google Cloud Console:
┌─────────────────────────────────────────────────────────────────┐
│ Authorized redirect URIs:                                       │
│ http://localhost:3000/api/auth/callback                         │
│ https://mfcdxnfppgvyknbsdmzy.supabase.co/auth/v1/callback      │
│ https://glowhair.vercel.app/api/auth/callback                   │
└─────────────────────────────────────────────────────────────────┘


¿CUÁNDO CAMBIAR A PRODUCCIÓN?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Cuando tu app esté desplegada en Vercel y quieras que funcione allí:

1. En Supabase, cambia Site URL de:
   http://localhost:3000 → https://glowhair.vercel.app

2. Listo. Las Redirect URLs ya incluyen ambas, así que no necesitas
   cambiar nada más.


NOTAS IMPORTANTES:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• Siempre prueba en http://localhost:3000 (no en 127.0.0.1)
• Después de cambiar configuración, espera 1-2 minutos
• Si sigue sin funcionar, prueba en ventana de incógnito
• El error DNS_PROBE_FINISHED_NXDOMAIN significa que la URL no existe


¿SIGUE SIN FUNCIONAR?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. Borra caché del navegador (Ctrl+Shift+Del)
2. Abre consola del navegador (F12) y revisa errores
3. Verifica en Supabase → Authentication → Providers → Google
   que esté ENABLED y tenga Client ID y Secret
4. Lee el archivo docs/FIX_OAUTH_URL_ERROR.md para más detalles
